
Base line Test

1. Install 202411
2. Cold Reboot
3. Install 202505
4. Warm-reboot
5. Check syslog

Fix Test:
6. Modify the finalizer script - comment out system wide disable
Set next image as 202411
cold reboot
set next image as 202505
warm-reboot
6. Check for logs related to the finalizer changes in syslog



# str2-7050cx3-acs-12
# ssh admin@10.3.146.13


vms28-t0-7050-14 (str2-7050cx3-acs-14)
10.3.146.40

show ip int
sudo sonic_installer install -y http://10.201.148.43/pipelines/Networking-acs-buildimage-Official/broadcom/internal-202411/tagged/sonic-aboot-broadcom.swi


sudo reboot

show ip int
show int portchannel

sudo sonic_installer install -y http://10.201.148.43/pipelines/Networking-acs-buildimage-Official/broadcom/internal-202505/tagged/sonic-aboot-broadcom.swi
sudo sonic_installer list
sudo warm-reboot -vvv

show ip int
show int portchannel


vi /usr/local/bin/finalize-warmboot.sh
    - check function finalize_fast_reboot()



####
show ip int
sudo sonic_installer install -y http://10.201.148.43/pipelines/Networking-acs-buildimage-Official/broadcom/internal-202411/tagged/sonic-aboot-broadcom.swi

show ip int
show int portchannel
sudo reboot

sudo sonic_installer install -y http://10.201.148.43/pipelines/Networking-acs-buildimage-Official/broadcom/internal-202505/tagged/sonic-aboot-broadcom.swi
sudo sonic_installer list
sudo warm-reboot -vvv

#check for logs
# edit vi /usr/local/bin/finalize-warmboot.sh
#     - function finalize_fast_reboot()
sudo sonic_installer set-next-boot SONiC-OS-20241110.28
sudo reboot

#after reboot
sudo sonic_installer set-next-boot SONiC-OS-20250510.13
sudo sonic_installer list
show ip int
show int portchannel
sudo warm-reboot -vvv

# After reboot:
sonic-db-cli STATE_DB hget "WARM_RESTART_ENABLE_TABLE|system" enable
